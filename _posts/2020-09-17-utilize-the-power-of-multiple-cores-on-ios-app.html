---
layout: post
title: "Utilize the power of multiple Cores on iOS App"
date: 2020-09-17
categories: [iOS, swift]
tags: [programming, swift, iOS, concurrency]
---

<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Utilize the power of multiple Cores on iOS App</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Utilize the power of multiple Cores on iOS App</h1>
</header>
<section data-field="subtitle" class="p-summary">
Concurrency is achieved when the app is capable to run multiple tasks at the same time. Latest A13 Bionic comes with 6 cores which meansâ€¦
</section>
<section data-field="body" class="e-content">
<section name="6a2d" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="f5f8" id="f5f8" class="graf graf--h3 graf--leading graf--title">Utilize the power of multiple Cores on iOSÂ App</h3><figure name="c671" id="c671" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*ElT2EzRT64e17AhKxBX_fA.jpeg" data-width="1280" data-height="719" src="https://cdn-images-1.medium.com/max/800/1*ElT2EzRT64e17AhKxBX_fA.jpeg"><figcaption class="imageCaption">Sourceâ€Šâ€”â€Š<a href="https://pixabay.com/illustrations/physics-quantum-physics-particles-3873118/" data-href="https://pixabay.com/illustrations/physics-quantum-physics-particles-3873118/" class="markup--anchor markup--figure-anchor" rel="nofollow noopener" target="_blank">https://pixabay.com/illustrations/physics-quantum-physics-particles-3873118/</a></figcaption></figure><p name="4da9" id="4da9" class="graf graf--p graf-after--figure">Concurrency is achieved when the app is capable to run multiple tasks at the same time. Latest A13 Bionic comes with 6 cores which means that it has the capacity to execute 6 tasks at a time. Yes, one core can execute at-most one task at at time. To learn more about the cores, please go through <a href="https://en.wikipedia.org/wiki/Apple_A13" data-href="https://en.wikipedia.org/wiki/Apple_A13" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Cores</a></p><p name="4fe2" id="4fe2" class="graf graf--p graf-after--p">All the latest iphones has the capacity to run multiple tasks at a time which improves the performance of the app. But how does it do that? Letâ€™s understand this in this post.</p><p name="d4f7" id="d4f7" class="graf graf--p graf-after--p">When we tap on the app icon on the home screen on our phone, a program gets executed by our operating system (OS will have all the addresses and meta data to launch the program after the app gets installed). Then this program creates process to start the execution which starts with the initial point(in iOS itâ€™s called main.m). During the lifetime of this process, it may creates many threads (smallest sequence of instructions to be executed by the cores). Letâ€™s understand these terminologies first -</p><h3 name="455c" id="455c" class="graf graf--h3 graf-after--p">Thread</h3><p name="f5a0" id="f5a0" class="graf graf--p graf-after--h3">In very simple words, itâ€™s a smallest sequence of instructions which gets executed by the cores available on the device.</p><figure name="f2e3" id="f2e3" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*ycSn_8hJEfSRW3TXiwtilQ.png" data-width="2000" data-height="908" src="https://cdn-images-1.medium.com/max/800/1*ycSn_8hJEfSRW3TXiwtilQ.png"></figure><p name="d449" id="d449" class="graf graf--p graf-after--figure">Above code shows how we create a seperate thread to execute some code in <strong class="markup--strong markup--p-strong">getData</strong> method. As the scope of this thread is at the method level, it will be destroyed by the OS as soon as it completes <strong class="markup--strong markup--p-strong">getData()</strong></p><p name="6917" id="6917" class="graf graf--p graf-after--p">The app starts with Main Thread which executes all the UI level instructions and also manages some background threads to execute background tasks. I would highly recommend you to go through Threads in deep as it will help you understand how iOS schedules and execute tasks on multiple cores at a time. To read more about Threads please go through- <a href="https://developer.apple.com/documentation/foundation/thread" data-href="https://developer.apple.com/documentation/foundation/thread" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Threads</a></p><h3 name="a6cb" id="a6cb" class="graf graf--h3 graf-after--p">Process</h3><p name="da43" id="da43" class="graf graf--p graf-after--h3">A process is the one which creates and manages all the threads required to execute a program. Consider a facebook app on our iphone. On the OS level, itâ€™s stored as a program and when we launch it, it creates a process which in-turn creates threads to run our instructions. So a process can have multiple threads running a the same time and in a similar way, a program can have multiple processes running at the same time.</p><blockquote name="8e40" id="8e40" class="graf graf--blockquote graf-after--p">So the finals words areâ€Šâ€”â€ŠA process creates or managess one or more threads to execute the instructions. A program creates or manages one or more process to start and run the program till itâ€™s completion.</blockquote><p name="3296" id="3296" class="graf graf--p graf-after--blockquote">An iOS app is a program which, when launched, creates a process that creates and manages threads to execute the instructions in our code. Our app comes with One Main Thread that executes all the UI level tasks and mostly runs on high performance cores (every processor has some high performance cores). iOS gives us options to create other threads to run our code in background to acheive better performance because if those background tasks are run on the same main thread, our UI will get unresponsive for the time the other tasks get executed.</p><p name="9282" id="9282" class="graf graf--p graf-after--p">iOS gives some high level abstractions too to create and handle threads. Example areâ€Šâ€”â€Š<strong class="markup--strong markup--p-strong">GCD</strong> (Grand Central Dispatch), Operation Queues.</p><h3 name="d59a" id="d59a" class="graf graf--h3 graf-after--p">Grand Central DispatchÂ (GCD)</h3><p name="5cdc" id="5cdc" class="graf graf--p graf-after--h3">Itâ€™s similiar Câ€™s libdispatch library. Itâ€™s purpose is to queue up tasks (piece of code e.g. method or closure) that can be run in parallel by the available cores. GCD is built upon the Threads API so it does all the work the same way but we donâ€™t have to worry about creating and managing Threads, which saves a lot of effort and time. Pass a closure and GCD will take care of executing it with the attached thread.We can enqueue n number of tasks to a queue but they are executed FIFO(First in First Out). These queues will have a pool of threads attached managed by the OS.</p><blockquote name="ebb0" id="ebb0" class="graf graf--blockquote graf-after--p">Serial Queues have one thread attached and Concurrent queues can have as many threads as the system has resources for to run tasks in parallel.</blockquote><blockquote name="8756" id="8756" class="graf graf--blockquote graf-after--blockquote">Even GCD start execution of the tasks in FIFO but it doesnâ€™t ensure that the tasks will finish in the order we submit them, rather this depends on the taskâ€™s complexity and the time it can take.</blockquote><p name="e634" id="e634" class="graf graf--p graf-after--blockquote">Thereâ€™re two types of Queues that iOS provides to execute our tasks in parallel</p><ol class="postList"><li name="7329" id="7329" class="graf graf--li graf-after--p">Serial Queues</li><li name="bf84" id="bf84" class="graf graf--li graf-after--li">Concurrent Queues</li></ol><h4 name="cfc5" id="cfc5" class="graf graf--h4 graf-after--li">Serial Queues</h4><p name="021c" id="021c" class="graf graf--p graf-after--h4">Serial queues has only single thread associated with them and thus allows a single task to be executed at a given time. Our App runs on a Serial Queue which is called Main Queue. All the UI level operations run on this queue and if we execute any other task in the same queue, our UI might get unresponsive until the other tasks gets completed. So itâ€™s highly recommended to use main queue only for UI related stuff.</p><h4 name="4eaa" id="4eaa" class="graf graf--h4 graf-after--p">Concurrent Queues</h4><p name="b754" id="b754" class="graf graf--p graf-after--h4">A concurrent queue, on the other hand, is able to utilize as many threads as the system has resources for. Threads will be created and released as necessary on a concurrent queue.</p><blockquote name="93bb" id="93bb" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">Note</strong>: While you can tell iOS that youâ€™d like to use a concurrent queue, remember that there is no guarantee that more than one task will run at a time. If your iOS device is completely bogged down and your app is competing for resources, it may only be capable of running a single task.</blockquote><h4 name="ad6d" id="ad6d" class="graf graf--h4 graf-after--blockquote">Example of a SerialÂ Queue</h4><figure name="3134" id="3134" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*K3GofVju1gicHHmlCA2dAA.png" data-width="2340" data-height="1664" src="https://cdn-images-1.medium.com/max/800/1*K3GofVju1gicHHmlCA2dAA.png"></figure><p name="eafa" id="eafa" class="graf graf--p graf-after--figure">As you can see, three blocks of code are asynchrounously enqueued in the serial queue and the result shows that the second tasks start only when the first is finished and same goes for 2nd and 3rd.</p><h4 name="a5fe" id="a5fe" class="graf graf--h4 graf-after--p">Example of a Concurrent Queue</h4><figure name="30f4" id="30f4" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*jeSmXgZQEXkH_hb7p3FtOw.png" data-width="2828" data-height="1860" src="https://cdn-images-1.medium.com/max/800/1*jeSmXgZQEXkH_hb7p3FtOw.png"></figure><p name="56e3" id="56e3" class="graf graf--p graf-after--figure">In this example, a we enqueue three blocks to execute and the results shows that the 2nd and 3rd tasks starts executing before even the first is finished. This means that the task will be executed concurrently on different cores.</p><p name="c46b" id="c46b" class="graf graf--p graf-after--p">I canâ€™t cover GCD in full in this post, probably will write a separate one just to explain GCD and itâ€™s terminologies. If youâ€™re eager to learn more, go through the official documention for the same- <a href="https://developer.apple.com/documentation/DISPATCH" data-href="https://developer.apple.com/documentation/DISPATCH" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Queues</a></p><h4 name="a858" id="a858" class="graf graf--h4 graf-after--p">Asynchronous doesnâ€™t mean concurrent</h4><blockquote name="4115" id="4115" class="graf graf--blockquote graf--hasDropCapModel graf-after--h4">While the difference seems subtle at first, just because your tasks are asynchronous doesnâ€™t mean they will run concurrently. Youâ€™re actually able to submit asynchronous tasks to either a serial queue or a concurrent queue. Being synchronous or asynchronous simply identifies whether or not the queue on which youâ€™re running the task must wait for the task to complete before it can spawn the next task.<br>On the other hand, categorizing something as serial versus concurrent identifies whether the queue has a single thread or multiple threads available to it. If you think about it, submitting three asynchronous tasks to a serial queue means that each task has to completely finish before the next task is able to start as there is only one thread available.<br>In other words, a task being synchronous or not speaks to the source of the task. Being serial or concurrent speaks to the destination of the task.</blockquote><h3 name="bf08" id="bf08" class="graf graf--h3 graf-after--blockquote">Operations</h3><p name="263a" id="263a" class="graf graf--p graf-after--h3">Just like GCD, Operations and OperationQueue are the highest level of abstraction to achieve concurrency in our app. Operations are fully-functional classes that can be submitted to an OperationQueue, just like youâ€™d submit a closure of work to a DispatchQueue for GCD. Because theyâ€™re classes and can contain variables, you gain the ability to know what state the operation is in at any given point.</p><p name="3456" id="3456" class="graf graf--p graf-after--p">At a time, a operation can be in any of these state-</p><ol class="postList"><li name="c6c6" id="c6c6" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">isReady</strong></li><li name="dfb5" id="dfb5" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">isExecuting</strong></li><li name="16f3" id="16f3" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">isCancelled</strong></li><li name="4760" id="4760" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">isFinished</strong></li></ol><p name="406c" id="406c" class="graf graf--p graf-after--li">Each stateâ€™s name explain the current status of the operation.</p><blockquote name="36cd" id="36cd" class="graf graf--blockquote graf-after--p">Point to note here is, if an operation is in isExecuting state and we set <strong class="markup--strong markup--blockquote-strong">isCancelled </strong>to true that doesnâ€™t mean that the operation will be immediately cancelled. Itâ€™ll just set the property to isCancelled.</blockquote><p name="b418" id="b418" class="graf graf--p graf-after--blockquote">Operations provide greater control over your tasks as you can now handle such common needs as cancelling the task, reporting the state of the task, wrapping asynchronous tasks into an operation and specifying dependencies between various tasks. Iâ€™m not going in deep about operations but you can read about them right here- <a href="https://developer.apple.com/documentation/foundation/operationqueue" data-href="https://developer.apple.com/documentation/foundation/operationqueue" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">OperationQueues</a></p><h3 name="9990" id="9990" class="graf graf--h3 graf-after--p">Conclusion</h3><p name="1d21" id="1d21" class="graf graf--p graf-after--h3">To make performant and powerful apps, Concurrent programming becomes the most important subject to learn. Even though iOS provides higher level abstractions like GCD and Operations, it becomes really important to know how and when to use them. I would suggest everyone if they are new to iOS development, to go through GCD, Operations in detail and also learn how and when these abstractions work best. Itâ€™s equally important to learn how the threading works underneath to understand the low level execution for making better decisions. Thereâ€™re other important terminologies like Semaphores, Groups and Locks which we should know but Iâ€™m keeping them for another post.</p><p name="ccbb" id="ccbb" class="graf graf--p graf-after--p">Thanks For Reading ðŸ˜€</p><p name="88fe" id="88fe" class="graf graf--p graf-after--p graf--trailing"><strong class="markup--strong markup--p-strong">Bye ðŸ‘‹</strong></p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@iamankurjain" class="p-author h-card">Ankur JAIN</a> on <a href="https://medium.com/p/f945beee88e2"><time class="dt-published" datetime="2020-09-17T13:32:28.343Z">September 17, 2020</time></a>.</p><p><a href="https://medium.com/@iamankurjain/understand-terminologies-in-concurrency-ios-f945beee88e2" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on August 2, 2025.</p></footer></article></body></html>